function getBrowser(){const e=navigator.userAgent.toLowerCase();let t=[e.match(/chrome/),e.match(/opera/),e.match(/safari/),e.match(/firefox/)].find((e=>e));return t&&(t=t[0]),t}const browser=getBrowser();function browsersFix(){if("firefox"!==browser&&"safari"!==browser){let e=[];e=e.concat(Array.from(document.querySelectorAll('[data-table-search-item="added-by"]'))),e.forEach((e=>{e.style.transform="translate(0, 1px)"}))}if("firefox"===browser){let e=[];e=e.concat(Array.from(document.querySelectorAll(".fav-blacklist_container-child"))),e=e.concat(Array.from(document.querySelectorAll(".selectBox_value-text"))),e=e.concat(Array.from(document.querySelectorAll(".calendarouts_text"))),e=e.concat(Array.from(document.querySelectorAll(".foundation-clear_filter"))),e.forEach((e=>{e.classList.add("__moz-fix")})),document.querySelectorAll(".comm_popup-textarea_btns").forEach((e=>{e.querySelectorAll("button").forEach((e=>e.classList.add("__moz-fix")))}))}}let bodyOverflow;browsersFix();let bodyOverflowObserver=new MutationObserver((()=>{let e=document.querySelector(".wrapper");if(document.body.classList.contains("body--locked-scroll")){let t=getScrollWidth();e.style.paddingRight=`${t}px`}else e.style.removeProperty("padding-right")}));function getScrollWidth(){let e=document.createElement("div");e.style.cssText="\n        width: 100px; height: 100px; z-index: -1; position: absolute; bottom: -150vh; overflow: scroll;\n    ",document.body.append(e);let t=e.offsetWidth-e.clientWidth;return e.remove(),t}function createElement(e,t,o){let r=document.createElement(e);return r.className=t||"",o&&r.insertAdjacentHTML("afterbegin",o),r}bodyOverflowObserver.observe(document.body,{attributes:!0}),PopExits=document.querySelectorAll(".popup_exit");for(let e=0;e<PopExits.length;e++)PopExits[e].onclick=closeCommPopup;document.getElementById("popup_work_exit").addEventListener("click",(()=>{document.querySelector("#work_popup_wrapper").classList.remove("popup_active"),document.body.classList.remove("body--locked-scroll")}));let btnsObserver=new MutationObserver((()=>initPopupButtons()));function setCommWrappersIndexes(){document.querySelectorAll(".table .table_body").forEach((e=>{e.querySelectorAll(".comm_block_wrap").forEach(((e,t)=>e.dataset.commIndex=t))}))}btnsObserver.observe(document.body,{childList:!0}),setCommWrappersIndexes(),WorkStatList=document.querySelectorAll(".table_allInfo > div:first-child span:first-child > svg");for(var i=0;i<WorkStatList.length;i++)WorkStatList[i].onclick=function(){document.querySelector("#work_popup_wrapper").classList.add("popup_active"),document.body.classList.add("body--locked-scroll")};function genderHandler(e){let t=document.querySelector(".comm_popup-textarea_name .form_radio:first-child .form_radio_value"),o=document.querySelector(".comm_popup-textarea_name .form_radio:last-child .form_radio_value");"female"==e?(t.textContent="Безработная",o.textContent="Работаю, но активно ищу работу"):(t.textContent="Безработный",o.textContent="Работаю, но активно ищу работу")}let commPopupWrapper=document.querySelector("#comm_popup_wrapper");function closeCommPopup(){commPopupWrapper.classList.remove("popup_active"),document.body.classList.remove("body--locked-scroll"),commPopupWrapper.classList.remove("ch_comm"),commPopupWrapper.classList.remove("add_comm"),commPopupWrapper.dispatchEvent(new CustomEvent("popup-close")),setTimeout((()=>{commPopupWrapper.removeAttribute("data-table-index"),commPopupWrapper.removeAttribute("data-edit-comm-index")}),100)}commPopupWrapper.addEventListener("popup-close",(()=>{if(!commPopupWrapper.classList.contains("popup_active")){commPopupWrapper.querySelector("textarea").value=""}}));let favorites=Array.from(document.querySelectorAll(".favorite")),darklists=Array.from(document.querySelectorAll(".darklist")),popup_continue=Array.from(document.querySelectorAll(".popup_continue")),popup_canc=Array.from(document.querySelectorAll(".comm_popup-textarea_btns > button:nth-child(1)")),popup_edit=Array.from(document.querySelectorAll(".popup_edit"));function initPopupButtons(e=!1){let t=Array.from(document.querySelectorAll(".favorite")).filter((e=>!favorites.includes(e))),o=Array.from(document.querySelectorAll(".darklist")).filter((e=>!darklists.includes(e)));t.forEach((e=>e.addEventListener("click",onFavoritesClick))),o.forEach((e=>e.addEventListener("click",onDarklistClick))),e&&(favorites.forEach((e=>e.addEventListener("click",onFavoritesClick))),darklists.forEach((e=>e.addEventListener("click",onDarklistClick))))}function onFavoritesClick(){let e=this.closest(".fav-blacklist_container").querySelector(".darklist");"Добавить в избранное"==this.querySelector("a").innerText&"Добавить в черный список"==e.innerText?(this.parentElement.parentElement.childNodes[5].classList.add("infavouritelist"),this.querySelector("a").innerText="Убрать из избранного",this.dataset.filterConditionValue="infavoriteslist"):"Добавить в избранное"==this.querySelector("a").innerText&"Убрать из черного списка"==e.innerText?(this.querySelector("a").innerText="Убрать из избранного",this.parentElement.parentElement.childNodes[5].classList.add("infavouritelist"),e.querySelector("a").innerText="Добавить в черный список",this.parentElement.parentElement.childNodes[3].classList.remove("indarklist"),e.removeAttribute("data-filter-condition-value"),this.dataset.filterConditionValue="infavoriteslist"):"Убрать из избранного"==this.querySelector("a").innerText&&(this.querySelector("a").innerText="Добавить в избранное",this.parentElement.parentElement.childNodes[5].classList.remove("infavouritelist"),this.removeAttribute("data-filter-condition-value")),doFilter()}function onDarklistClick(){let e=this.closest(".fav-blacklist_container").querySelector(".favorite");"Добавить в черный список"==this.querySelector("a").innerText&"Добавить в избранное"==e.innerText?(this.querySelector("a").innerText="Убрать из черного списка",this.parentElement.parentElement.childNodes[3].classList.add("indarklist"),this.dataset.filterConditionValue="indarklist"):"Добавить в черный список"==this.querySelector("a").innerText&"Убрать из избранного"==e.innerText?(this.querySelector("a").innerText="Убрать из черного списка",e.querySelector("a").innerText="Добавить в избранное",this.parentElement.parentElement.childNodes[3].classList.add("indarklist"),this.parentElement.parentElement.childNodes[5].classList.remove("infavouritelist"),e.removeAttribute("data-filter-condition-value"),this.dataset.filterConditionValue="indarklist"):"Убрать из черного списка"==this.querySelector("a").innerText&&(this.querySelector("a").innerText="Добавить в черный список",this.parentElement.parentElement.childNodes[3].classList.remove("indarklist"),this.removeAttribute("data-filter-condition-value")),doFilter()}function removeComm(e){let t=e.closest(".table_body"),o=parseInt(e.dataset.commIndex),r=Array.from(document.querySelectorAll(".table .table_body")).findIndex((t=>t===e.closest(".table_body")));r=parseInt(r);let n=parseInt(commPopupWrapper.dataset.tableIndex),i=Array.from(e.parentNode.querySelectorAll(".comm_block_wrap")).filter((e=>parseInt(e.dataset.commIndex)>o)),s=Array.from(commPopupWrapper.querySelectorAll(".comm_popup_foundation-block")).filter((e=>parseInt(e.dataset.popupCommIndex)>o));if(e.parentNode.querySelectorAll(".comm_block_wrapp").length<2){t.querySelectorAll('[data-filter-item="comment-presence"]').forEach((e=>e.dataset.filterConditionValue="has-no-comment"))}if(e.remove(),n===r){let e=commPopupWrapper.querySelector(`[data-popup-comm-index="${o}"]`);e&&e.remove()}let l=document.querySelector(".comm_popup_wrapper[data-edit-comm-index]"),a=l?parseInt(l.dataset.editCommIndex):null;i.forEach((e=>{let t=parseInt(e.dataset.commIndex);e.dataset.commIndex=t-1,t==a&&(l.dataset.editCommIndex=a-1)})),s.forEach((e=>{let t=parseInt(e.dataset.popupCommIndex);e.dataset.popupCommIndex=t-1})),onFilterSelectsChange()}initPopupButtons(!0);let newCommSaveBtn=commPopupWrapper.querySelector(".popup_save_new-comm");newCommSaveBtn.addEventListener("click",(function(){let e=commPopupWrapper.querySelector("textarea").value,t=commPopupWrapper.dataset.tableIndex,o=document.querySelectorAll(".table .table_body")[t],r=commPopupWrapper.dataset.editCommIndex,n=o.querySelectorAll(".comm_block_wrap")[r],i=n.querySelector(".comm_block_text"),s=n.querySelector(".popup_question-content");i.textContent=e,s.textContent=e,closeCommPopup()}));let popupCommCancel=commPopupWrapper.querySelector(".popup_comm_cancel");function ppEx(e){let t=document.querySelectorAll(".popup_continue"),o=e;for(let e=0;e<t.length;e++)t[e].onclick=function(e){PopupStatusHandler(o);let t=Array.from(document.querySelector(".table").querySelectorAll(".table_body"))[parseInt(e.target.closest("[data-table-index]").dataset.tableIndex)],r=e.target.closest(".comm_popup_wrapper").querySelector("textarea"),n=r.value;r.value="",closeCommPopup();let i=new Date,s=i.getDate().toString(),l=(i.getMonth()+1).toString(),a=i.getHours().toString(),c=i.getMinutes().toString(),p=createElement("div","comm_block_wrap",`\n                <span class="comm_block_text_date">\n                    ${s.length<2?"0"+s:s}.${l.length<2?"0"+l:l}.${i.getFullYear()+" "}\n                    ${a.length<2?"0"+a:a}:${c.length<2?"0"+c:c}\n                </span>\n                <p class="comm_block_text_wrap">\n                    <span class="comm_block_text">\n                        ${n}\n                    </span>\n                </p>\n                <div class="popup_edit_wrapper">\n                    <div class="popup_edit">\n                        <svg style="fill: #0088d2;">\n                            <use xlink:href="#pencil"></use>\n                        </svg>\n                    </div>\n                    <div class="popup_question">\n                        <svg>\n                            <use xlink:href="#question"></use>\n                        </svg>\n                        <div class="popup_question-content">\n                            ${n}\n                        </div>\n                    </div>\n                    <div class="comm_block_remove">\n                        <svg class="comm_popup_foundation-block_remove">\n                            <use xlink:href="#trash"></use>\n                        </svg>\n                    </div>\n                </div>\n            `),d=t.querySelector(".table_allInfo_comments-wrapper"),u=Array.from(d.querySelectorAll(".comm_block_wrap"));p.dataset.commIndex=u.length,d.closest(".table_body").querySelector("[data-filter-item='comment-presence']").dataset.filterConditionValue="has-comment",d.append(p),onFilterSelectsChange(),initPopupButtons()}}function PopupStatusHandler(e){let t=document.querySelectorAll(".comm_popup-textarea_name .form_radio");for(let o=0;o<t.length;o++)if(t[o].querySelector("input").checked){let r=e.closest(".table_body"),n=r.querySelector("[data-gender]");n.classList.remove(r.querySelector("[data-gender]").dataset.worktype),n.classList.add(t[o].querySelector("input").dataset.worktype),n.dataset.worktype=t[o].querySelector("input").dataset.worktype,n.childNodes[0].textContent=t[o].querySelector("label").textContent}}popupCommCancel.addEventListener("click",closeCommPopup),popup_canc.onclick=function(){document.body.classList.remove("body--locked-scroll"),document.querySelector("#comm_popup_wrapper").classList.remove("popup_active"),document.querySelector("#comm_popup_wrapper").classList.remove("ch_comm"),document.querySelector("#comm_popup_wrapper").classList.remove("add_comm")},document.querySelector(".table_allInfo > div:first-child > div").onclick=function(){document.querySelector(".table > div:nth-child(2)").classList.remove("yellow_row")},document.querySelector(".table_info_wrapp:nth-child(3) > div:nth-child(1)").onclick=function(){document.querySelector(".table > div:nth-child(2)").classList.remove("yellow_row")},allSelectors=document.querySelectorAll(".multiselect"),window.addEventListener("click",(e=>{if(!e.target.closest(".multiselect"))for(var t=0;t<allSelectors.length;t++)allSelectors[t].classList.remove("select_active")})),window.addEventListener("click",(e=>{const t=e.target;!t.closest(".datetable_wrapper")&!t.closest("#calendar2_out")&!t.closest("#calendar3_out")&!t.closest(".CalendarSelectt")&!t.closest(".CalendarSelectt > option")&&document.querySelector(".datetable_wrapper").classList.remove("datetable_active")})),document.querySelector(".header > nav > img").addEventListener("click",(e=>{let t=document.querySelector(".header_wrapper");t.classList.toggle("menu_active"),t.classList.contains("menu_active")?document.body.classList.add("body--locked-scroll"):document.body.classList.remove("body--locked-scroll")})),document.querySelector(".exit_menu").addEventListener("click",(e=>{document.querySelector(".header_wrapper").classList.remove("menu_active"),document.body.classList.remove("body--locked-scroll")})),tablesMore=document.querySelectorAll(".table_more");for(i=0;i<tablesMore.length;i++)tablesMore[i].onclick=function(){this.parentElement.childNodes[3].classList.toggle("table_popup_active")};tablegenderit=document.querySelectorAll(".table_popup > div:first-child");for(i=0;i<tablegenderit.length;i++)tablegenderit[i].onclick=function(){this.parentElement.classList.remove("table_popup_active")};for(document.querySelector(".work_more > a").onclick=function(){document.querySelector(".work_more").classList.toggle("work_more_active")},document.querySelector(".work_more button").onclick=function(){document.querySelector(".work_more").classList.remove("work_more_active")},allMoreWorks=document.querySelectorAll(".work_more"),window.addEventListener("click",(e=>{const t=e.target;if(!t.closest(".work_more > div")&!t.closest(".work_more"))for(var o=0;o<allMoreWorks.length;o++)allMoreWorks[o].classList.remove("work_more_active")})),loginList=document.querySelectorAll(".header-nav_wrapper > ul:nth-child(2) > li a"),u=0;u<loginList.length;u++)loginList[u].onclick=function(){document.querySelector(".header-nav_wrapper").classList.add("header_log")};for(document.querySelector(".sign_contaiener > a:nth-child(2)").onclick=function(){document.querySelector(".header-nav_wrapper").classList.remove("header_log")},document.querySelector(".sign_contaiener > a:nth-child(1)").onclick=function(){document.querySelector(".profile_container").classList.toggle("profile_active")},window.addEventListener("click",(e=>{const t=e.target;!t.closest(".profile_container")&!t.closest(".sign_contaiener > a:nth-child(1)")&&document.querySelector(".profile_container").classList.remove("profile_active")})),document.querySelector(".profile-exit").onclick=function(){document.querySelector(".profile_container").classList.remove("profile_active"),document.querySelector(".header-nav_wrapper").classList.remove("header_log")},trashList=document.querySelectorAll(".comm_popup_foundation-block_date > svg:nth-child(3)"),u=0;u<trashList.length;u++)trashList[u].onclick=function(){this.parentElement.parentElement.remove()};var popup=document.querySelector(".warn_popup_wrapper");function StatusWorkHandler(e,t){document.querySelector(".save_status_work").onclick=function(){let e=document.querySelectorAll(".form_radio input");for(let o=0;o<e.length;o++)e[o].checked&&(t.classList.remove(t.dataset.worktype),t.classList.add(e[o].dataset.worktype),t.dataset.worktype=e[o].dataset.worktype,t.dataset.filterConditionValue=e[o].dataset.worktype,t.childNodes[0].textContent=e[o].closest(".form_radio_label").querySelector(".form_radio_value").textContent,document.querySelector("#work_popup_wrapper").classList.remove("popup_active"),document.body.classList.remove("body--locked-scroll"));doFilter()}}popup.classList.contains("warn_active")&&document.body.classList.add("body--locked-scroll"),document.querySelector(".warn_popup_exit").onclick=function(){document.querySelector(".warn_popup_wrapper").classList.remove("warn_active"),document.body.classList.remove("body--locked-scroll")},SpanStatusEdit=document.querySelectorAll(".workStatus > svg");for(let e=0;e<SpanStatusEdit.length;e++)SpanStatusEdit[e].onclick=function(){let t=SpanStatusEdit[e].parentElement.dataset.worktype,o=document.querySelectorAll(".form_radio input");for(let e=0;e<o.length;e++)this.parentElement.dataset.worktype==o[e].dataset.worktype&&(o[e].checked=!0);document.querySelector("#work_popup_wrapper").classList.add("popup_active"),document.body.classList.add("body--locked-scroll"),StatusWorkHandler(t,this.parentElement);let r=this.parentElement.dataset.gender,n=document.querySelector(".work_popup_radio .form_radio:first-child .form_radio_value"),i=document.querySelector(".work_popup_radio .form_radio:last-child .form_radio_value");"female"==r?(n.textContent="Безработная",i.textContent="Работаю, но активно ищу работу"):(n.textContent="Безработный",i.textContent="Работаю, но активно ищу работу")};function addApplicantHoverHandler(){function e(e){e.target.closest(".add_applicant").classList.add("__hover")}function t(e){e.target.closest(".add_applicant").classList.remove("__hover")}document.querySelectorAll(".add_applicant").forEach((o=>{let r=o.querySelector(".add_applicant__link-button"),n=o.querySelector(".add_applicant__icon-button");r.addEventListener("pointerover",e),n.addEventListener("pointerover",e),r.addEventListener("pointerleave",t),n.addEventListener("pointerleave",t)}))}function findClosest(e,t){let o=e.querySelector(t);if(!o)do{o=e.parentNode.querySelector(t),e=e.parentNode}while(!o);return o}document.querySelector("#work_popup_wrapper .comm_popup-textarea_btns > button:first-child").onclick=function(){document.querySelector("#work_popup_wrapper").classList.remove("popup_active"),document.body.classList.remove("body--locked-scroll")},addApplicantHoverHandler();class FullImagePopup{constructor(e){this.onImgClick=this.onImgClick.bind(this),this.setImgSize=this.setImgSize.bind(this),this.closePopup=this.closePopup.bind(this),this.rootElem=e,this.src=this.rootElem.getAttribute("src"),this.alt=this.rootElem.getAttribute("alt")||"",this.biggestSidePercent=80,this.rootElem.addEventListener("click",this.onImgClick)}createPopup(){let e=createElement("div","full-image");e.insertAdjacentHTML("afterbegin",'\n        <div class="full-image__body">\n            <div class="popup_exit" id="popup_exit1">\n                <div>\n                    <div></div>\n                    <div></div>\n                </div>\n            </div>\n        </div>\n        '),e.querySelector(".popup_exit").addEventListener("click",this.closePopup),this.popupWrapper=e;let t=new Image;t.src=this.src,t.onload=()=>{this.img=t,this.iWidth=t.width,this.iHeight=t.height,this.popupWrapper.querySelector(".full-image__body").prepend(t),this.setImgSize(),window.addEventListener("resize",this.setImgSize)}}onImgClick(){this.createPopup(),document.body.append(this.popupWrapper),document.body.classList.add("body--locked-scroll")}setImgSize(){let e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,o=this.iWidth/this.iHeight,r=Math.round(e*(this.biggestSidePercent/100)),n=Math.round(t*(this.biggestSidePercent/100));if(1===o){let e=Math.min(r,n);e>this.iWidth&&(e=this.iWidth),this.img.width=this.img.height=e}else{let e,t;this.iWidth>this.iHeight&&(t=n>this.iHeight?this.iHeight:n,e=o*t,e>r&&(e=r,t=e/o)),this.iHeight>this.iWidth&&(e=r>this.iWidth?this.iWidth:r,t=e/o,t>n&&(t=n,e=t*o)),this.img.width=e,this.img.height=t}}closePopup(){this.popupWrapper.remove(),document.body.classList.remove("body--locked-scroll"),window.removeEventListener("resize",this.setImgSize),this.iWidth=0,this.iHeight=0}}class DynamicAdaptive{constructor(e){this.onMediaChange=this.onMediaChange.bind(this),this.rootElem=e;let t=this.rootElem.dataset.dynamicAdaptive.split(", ");this.mediaValue=t[0],this.mediaQuery=window.matchMedia(`(max-width: ${this.mediaValue}px)`),this.adaptiveSelector=t[1],this.adaptiveNode=findClosest(this.rootElem,this.adaptiveSelector),this.backAnchor=createElement("div"),this.onMediaChange(),this.mediaQuery.addEventListener("change",this.onMediaChange)}onMediaChange(){this.mediaQuery.matches?(this.rootElem.replaceWith(this.backAnchor),this.adaptiveNode.replaceWith(this.rootElem),this.isReplaced=!0):this.isReplaced&&(this.rootElem.replaceWith(this.adaptiveNode),this.backAnchor.replaceWith(this.rootElem))}}class PopupCommEdit{constructor(e){this.onBtnClick=this.onBtnClick.bind(this),this.onBtnControlClick=this.onBtnControlClick.bind(this),this.onInputEnter=this.onInputEnter.bind(this),this.rootElem=e,this.maxPageLength=1500,this.popupWrapper=document.querySelector("#comm_popup_wrapper"),this.commentsContainer=this.popupWrapper.querySelector(".comm_popup_foundation_wrapper"),this.currentPage=1,this.rootElem.addEventListener("click",this.onBtnClick)}onBtnClick(e){let t=e.target;this.currentTable=t.closest(".table_body"),this.renderPageControls(),this.setPageArrowsHandlers();let o=this.currentTable.querySelector("[data-worktype]").dataset.worktype,r=document.querySelectorAll(".comm_popup-textarea_name input");for(let e=0;e<r.length;e++)r[e].dataset.worktype==o&&(r[e].checked=!0);genderHandler(this.currentTable.querySelector("[data-gender]").dataset.gender),document.querySelector("#comm_popup_wrapper").classList.add("ch_comm"),document.querySelector("#comm_popup_wrapper").classList.add("popup_active"),document.body.classList.add("body--locked-scroll"),ppEx(t),this.commBlockWrap=t.closest(".comm_block_wrap");let n=this.commBlockWrap.querySelector(".comm_block_text").textContent.replace(/\s\s/g,"").trim();document.querySelector(".comm_popup").querySelector("textarea").value=n;let i=Array.from(document.querySelector(".table").querySelectorAll(".table_body")).findIndex((e=>e===this.currentTable));this.popupWrapper.dataset.tableIndex=i,this.popupWrapper.dataset.editCommIndex=this.commBlockWrap.dataset.commIndex,this.renderPopupCommsPages();let s=this.popupWrapper.querySelector(".popup_save_new-comm");s.addEventListener("click",(function e(){PopupStatusHandler(t),s.removeEventListener("click",e)}))}renderPopupCommsPages(){r=r.bind(this);let e=Array.from(this.currentTable.querySelectorAll(".comm_block_wrap")).filter((e=>e!==this.commBlockWrap));this.popupWrapper.querySelector(".comm_popup_foundation_wrapper").innerHTML="",this.popupComms=e.map((e=>{let t=function(e,t,o){let n=`\n            <div class="comm_popup_foundation-block_date">\n                <span>${t}</span>\n                <svg style="fill: #0088d2;" class="comm_popup_foundation-block_edit">\n                    <use xlink:href="#pencil"></use>\n                </svg>\n                <svg class="comm_popup_foundation-block_remove">\n                    <use xlink:href="#trash"></use>\n                </svg>\n            </div>\n            <div class="comm_popup_foundation-block_text">\n                ${e}\n            </div>\n            `,i=createElement("div","comm_popup_foundation-block",n);return i.dataset.popupCommIndex=o,r.call(this,i),i}(e.querySelector(".comm_block_text").textContent,e.querySelector(".comm_block_text_date").textContent,e.dataset.commIndex);return t})),this.commsPages=[];let t=[...this.popupComms],o=".comm_popup_foundation-block_text";function r(e){let t=e.querySelector(".comm_popup_foundation-block_edit"),o=e.querySelector(".comm_popup_foundation-block_remove");t.addEventListener("click",(e=>{n(e,i)})),o.addEventListener("click",(e=>{n(e,removeComm),this.renderPopupCommsPages()}))}function n(e,t){let o=e.target.closest("[data-popup-comm-index]"),r=parseInt(o.dataset.popupCommIndex),n=parseInt(commPopupWrapper.dataset.tableIndex);t(document.querySelectorAll(".table .table_body")[n].querySelectorAll(".comm_block_wrap")[r])}function i(e){e.querySelector(".popup_edit").dispatchEvent(new Event("click"))}function s(e){let t=0;return e.forEach((e=>{let r=e.querySelector(o).textContent;t+=r.length})),t}t.forEach(((e,t,r)=>{if(!e)return;if(e.querySelector(o).textContent.length>this.maxPageLength)this.commsPages.push([e]);else{let o=[];for(o.push(e);s(o)<this.maxPageLength;){let e=r[t+1];if(!e)break;o.push(e),r.splice(r.indexOf(e),1)}this.commsPages.push(o)}})),this.setPage(this.currentPage)}renderCurrentPage(){if(this.commsPages.length<1)return;let e=this.commsPages[this.currentPage-1];this.commentsContainer.innerHTML="",e.forEach((e=>this.commentsContainer.append(e)))}renderPageControls(){let e=this.popupWrapper.querySelector(".comm_popup_foundation"),t=e.querySelector(".comm_popup_buttons");t&&t.remove();e.insertAdjacentHTML("beforeend",'\n        <div class="comm_popup_buttons">\n            <div class="comm_popup_buttons_wrapper">\n                <div class="comm_popup_buttons_pag">\n                    <button class="popup_button_prev">\n                        <svg>\n                            <use xlink:href=\'#arrow\'></use>\n                        </svg>\n                    </button>\n                    <button class="popup_button_next popup_button_active">\n                        <svg>\n                            <use xlink:href=\'#arrow\'></use>\n                        </svg>\n                    </button>\n                    <span>\n                        <span class="comm_popup_page-start"></span>\n                        <span>ИЗ</span>\n                        <span class="comm_popup_page-end"></span>\n                    </span>\n                    <button class="popup_button_last popup_button_active">\n                        <svg>\n                            <use xlink:href=\'#arrow\'></use>\n                        </svg>\n                    </button>\n                </div>\n                <div class="comm_popup_buttons_pag_inp">\n                    <span>Перейти на страницу</span>\n                    <input class="comm_popup_input" type="number" value="1">\n                    <button class="comm_popup_input_enter">OK</button>\n                </div>\n            </div>\n        </div>\n        ')}setPageArrowsHandlers(){this.controlsBlock=this.popupWrapper.querySelector(".comm_popup_buttons_wrapper"),this.btnPrev=this.controlsBlock.querySelector(".popup_button_prev"),this.btnNext=this.controlsBlock.querySelector(".popup_button_next"),this.btnLast=this.controlsBlock.querySelector(".popup_button_last"),this.startTxtSpan=this.controlsBlock.querySelector(".comm_popup_page-start"),this.endTxtSpan=this.controlsBlock.querySelector(".comm_popup_page-end"),this.pageNumInput=this.controlsBlock.querySelector(".comm_popup_input"),this.pageNumEnter=this.controlsBlock.querySelector(".comm_popup_input_enter"),this.btnPrev.addEventListener("click",this.onBtnControlClick),this.btnNext.addEventListener("click",this.onBtnControlClick),this.btnLast.addEventListener("click",this.onBtnControlClick),this.pageNumInput.addEventListener("input",(function(e){let t=e.target,o=t.value;t.value=o.replace(/\D/g,"");for(;t.value.length>2;)t.value=t.value.slice(-2)})),this.pageNumEnter.addEventListener("click",this.onInputEnter)}onBtnControlClick(e){let t=e.target;"BUTTON"!==t.tagName&&(t=e.target.closest("button")),t.getAttribute("disabled")||(t===this.btnPrev&&this.setPage("prev"),t===this.btnNext&&this.setPage("next"),t===this.btnLast&&this.setPage("last"))}onInputEnter(){let e=parseInt(this.pageNumInput.value);this.setPage(e||1)}setPage(e){let t=this.commsPages.length||1;this.currentPage||(this.currentPage=1),this.currentPage>t&&(this.currentPage=t);let o=parseInt(e);if(o&&o<=t&&o>0)this.currentPage=this.currentPage=o;else if("string"==typeof e)switch(e){case"prev":this.currentPage--;break;case"next":this.currentPage++;break;case"last":this.currentPage=t}else this.currentPage=1;1===this.currentPage&&(this.btnNext.removeAttribute("disabled"),this.btnPrev.setAttribute("disabled",""),this.btnLast.removeAttribute("disabled")),this.currentPage===t&&(this.btnNext.setAttribute("disabled",""),this.btnPrev.removeAttribute("disabled"),this.btnLast.setAttribute("disabled","")),this.currentPage>1&&this.currentPage<t&&(this.btnNext.removeAttribute("disabled"),this.btnPrev.removeAttribute("disabled"),this.btnLast.removeAttribute("disabled")),1===this.currentPage&&1===t&&(this.btnNext.setAttribute("disabled",""),this.btnPrev.setAttribute("disabled",""),this.btnLast.setAttribute("disabled","")),this.startTxtSpan.innerHTML=this.currentPage,this.endTxtSpan.innerHTML=t,this.renderCurrentPage()}}class PopupCommAdd{constructor(e){this.onBtnClick=this.onBtnClick.bind(this),this.rootElem=e,this.rootElem.addEventListener("click",this.onBtnClick)}onBtnClick(e){let t=document.querySelector("#comm_popup_wrapper"),o=e.target.closest(".table_body"),r=e.target.closest(".table_body").querySelector("[data-worktype]").dataset.worktype,n=document.querySelectorAll(".comm_popup-textarea_name input");for(let e=0;e<n.length;e++)n[e].dataset.worktype==r&&(n[e].checked=!0);genderHandler(e.target.closest(".table_body").querySelector("[data-gender]").dataset.gender),t.classList.add("add_comm"),t.classList.add("popup_active");let i=Array.from(document.querySelector(".table").querySelectorAll(".table_body")).findIndex((e=>e===o));t.dataset.tableIndex=i,document.body.classList.add("body--locked-scroll"),ppEx(e.target)}}class PopupCommDelete{constructor(e){this.onBtnClick=this.onBtnClick.bind(this),this.rootElem=e,this.rootElem.addEventListener("click",this.onBtnClick)}onBtnClick(){let e=this.rootElem.closest("[data-table-index]").dataset.tableIndex,t=document.querySelectorAll(".table_body")[e],o=this.rootElem.closest("[data-edit-comm-index]").dataset.editCommIndex;removeComm(t.querySelector(`[data-comm-index="${o}"]`)),closeCommPopup()}}class PopupConfirm{constructor(e,t={}){this.onBtnClick=this.onBtnClick.bind(this),this.closePopup=this.closePopup.bind(this),this.agreeBtnHandler=this.agreeBtnHandler.bind(this),this.rootElem=e,this.popupInner=t.popupInner||"",this.popupWrapper=createElement("div","",this.popupInner),this.agreeBtn=this.popupWrapper.querySelector(t.agreeBtnSelector),this.exitBtn=this.popupWrapper.querySelector(t.exitBtnSelector)||this.popupWrapper.querySelector(".popup_exit"),this.rootElem.addEventListener("click",this.onBtnClick)}onBtnClick(){this.createPopup()}createPopup(){document.body.append(this.popupWrapper),document.body.classList.add("body--locked-scroll"),this.setPopupHandlers()}setPopupHandlers(){this.exitBtn.addEventListener("click",this.closePopup),this.agreeBtn.addEventListener("click",this.agreeBtnHandler)}closePopup(){this.popupWrapper.remove(),document.body.classList.remove("body--locked-scroll")}agreeBtnHandler(){this.closePopup()}}class DiedButton extends PopupConfirm{constructor(e){super(e,{popupInner:'\n            <div class="confirm_popup">\n                <div class="confirm_popup__body">\n                    <div class="confirm_popup__title">\n                        Удалить безвозвратно резюме?\n                    </div>\n                    <div class="confirm_popup__textarea-btns">\n                        <button class="confirm_popup__delete-resume">Да</button>\n                    </div>\n                    <div class="popup_exit">\n                        <div>\n                            <div></div>\n                            <div></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',agreeBtnSelector:".confirm_popup__delete-resume"}),this.rootElem=e,this.rootElem.addEventListener("click",this.onBtnClick)}onBtnClick(){super.onBtnClick(),this.resumeTable=this.rootElem.closest(".table_body")}agreeBtnHandler(){super.agreeBtnHandler(),this.resumeTable.remove()}}class CommBlockRemove extends PopupConfirm{constructor(e){super(e,{popupInner:'\n            <div class="confirm_popup">\n                <div class="confirm_popup__body">\n                    <div class="confirm_popup__title">\n                        Удалить комментарий?\n                    </div>\n                    <div class="confirm_popup__comm"></div>\n                    <div class="confirm_popup__textarea-btns">\n                        <button class="confirm_popup__delete-resume">Да</button>\n                    </div>\n                    <div class="popup_exit">\n                        <div>\n                            <div></div>\n                            <div></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            ',agreeBtnSelector:".confirm_popup__delete-resume"}),this.rootElem=e,this.comm=this.rootElem.closest("[data-comm-index]"),this.popupCommBlock=this.popupWrapper.querySelector(".confirm_popup__comm"),this.rootElem.addEventListener("click",this.onBtnClick)}onBtnClick(){super.onBtnClick(),this.commText=this.comm.querySelector(".comm_block_text").textContent,this.popupCommBlock.innerHTML="",this.popupCommBlock.insertAdjacentHTML("afterbegin",this.commText)}agreeBtnHandler(){super.agreeBtnHandler(),removeComm(this.comm)}}class Spoiler{constructor(e){this.toggle=this.toggle.bind(this),this.rootElem=e,this.spoilerButton=this.rootElem.querySelector(".spoiler__button"),this.spoilerHideable=this.rootElem.querySelector(".spoiler__hideable"),this.spoilerButton.addEventListener("click",this.toggle),this.rootElem.classList.contains("spoiler--shown")?this.show():this.hide()}toggle(){this.rootElem.classList.contains("spoiler--shown")?this.hide():this.show()}show(){let e=this.getHeight();this.spoilerHideable.style.cssText=`\n            max-height: ${e}px;\n            opacity: 1;\n        `,this.spoilerHideable.style.removeProperty("padding"),this.spoilerHideable.style.removeProperty("margin"),this.rootElem.classList.add("spoiler--shown")}hide(){this.spoilerHideable.style.cssText="\n            padding: 0;\n            margin: 0;\n            opacity: 0;\n            max-height: 0px;\n        ",this.rootElem.classList.remove("spoiler--shown")}getHeight(){let e=this.spoilerHideable.cloneNode(!0);e.style.cssText="position: absolute; z-index: -99; top: -100vh; left: -100vw;",document.body.append(e);let t=e.offsetHeight;return e.remove(),t+10}}let inittingSelectors=[{selector:"[data-popup-fullimage]",classInstance:FullImagePopup},{selector:"[data-dynamic-adaptive]",classInstance:DynamicAdaptive},{selector:".popup_edit",classInstance:PopupCommEdit},{selector:".comm_block_text_edit",classInstance:PopupCommEdit},{selector:".popup_add",classInstance:PopupCommAdd},{selector:".popup_delete_comm",classInstance:PopupCommDelete},{selector:".died",classInstance:DiedButton},{selector:".comm_block_remove",classInstance:CommBlockRemove},{selector:".spoiler",classInstance:Spoiler}],inittedInputs=[];function initInputs(){inittingSelectors.forEach((e=>{Array.from(document.querySelectorAll(`${e.selector}`)).forEach((t=>{Boolean(inittedInputs.find((o=>o.rootElem===t&&o instanceof e.classInstance)))||inittedInputs.push(new e.classInstance(t))}))}))}initInputs();let inputElementsObserver=new MutationObserver((e=>{initInputs()}));inputElementsObserver.observe(document.body,{childList:!0,subtree:!0});